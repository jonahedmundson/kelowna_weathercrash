getwd()
#subset(df, select = -c(var1, var3))
tail(subset(read.csv('../../weatherdata/UBCO/en_climate_hourly_BC_1123996_01-2017_P1H.csv'), select = `Precip..Amount..mm.`), 50)
#subset(df, select = -c(var1, var3))
tail(subset(read.csv('../../weatherdata/UBCO/en_climate_hourly_BC_1123996_01-2017_P1H.csv'), select = `Precip..Amount..mm.`), 150)
#subset(df, select = -c(var1, var3))
tail(subset(read.csv('../../weatherdata/UBCO/en_climate_hourly_BC_1123996_01-2019_P1H.csv'), select = `Precip..Amount..mm.`), 150)
{if (4 < 10){return paste0('0', 5)} else {return 5}}
if (4 < 10){return paste0('0', 5)} else {return 5}
{if (4 < 10){return (paste0('0', 5))} else {return 5}}
{if (4 < 10){return (paste0('0', '5'))} else {return '6'}}
{if (4 < 10){return (paste0('0', '5'))} else {return 6}}
{if (4 < 10){return (paste0('0', '5'))} else {return ('6')}}
function (x) {if (4 < 10){return (paste0('0', '5'))} else {return ('6')}}
function (x) {if (x < 10){return (paste0('0', '5'))} else {return ('6')}}
x = 4
function (x) {if (x < 10){return (paste0('0', '5'))} else {return ('6')}}
function(x) {if (x < 10){return (paste0('0', '5'))} else {return ('6')}}
sapply(4:6, function(x) {if (x < 10){return (paste0('0', '5'))} else {return ('6')}})
sapply(8:12, function(x) {if (x < 10){return (paste0('0', '5'))} else {return ('6')}})
sprintf("%02d", 5)
sprintf("%02d", 10)
fullWeather = c()
for (i in c(2017:2021)){
for (j in c(1:12)){
temp = subset(read.csv(paste0('../../weatherdata/en_climate_hourly_BC_1123939_',
sprintf("%02d", j), '-', i, '_P1H.csv')),
select = - c(`Temp.Flag`,
`Dew.Point.Temp.Flag`, `Rel.Hum.Flag`,
`Precip..Amount.Flag`, `Wind.Dir.Flag`,
`Wind.Spd.Flag`, `Visibility.Flag`,
`Stn.Press.Flag`, `Hmdx`, `Hmdx.Flag`, `Wind.Chill.Flag`))
fullWeather = rbind(fullWeather, temp)
}
}
nrow(fullWeather)
24*365*5 + 24 #2020 was a leap year
names(fullWeather)
levels(fullWeather$Weather)
print("test")
print("test", "hi")
levels(fullWeather$Weather)
head(fullWeather$Weather, 40)
head(fullWeather$Weather, 80)
fullWeather$Weather[400:500]
fullWeather$Weather[432]
unlist(fullWeather$Weather[432])
as.string(fullWeather$Weather[432])
string(fullWeather$Weather[432])
as.character(fullWeather$Weather[432])
test = as.character(fullWeather$Weather[432])
unlist(strsplit(test, ","))
strsplit(test, ",")
test = as.character(fullWeather$Weather[431])
test
unlist(strsplit(test, ","))
rep(0, 10)
data.frame()
test = data.frame()
test["hi"] = 5
test[, "hi"] = 5
data.frame(5, "ttest")
yikes = c("hi", "hel")
data.frame(c(4, 1), yikes)
fullWeather$Weather[500:600]
fullWeather$Weather[500:600]
fullWeather$Weather[513]
fullWeather$Weather[512]
head(fullWeather$'Heavy Rain')
head(fullWeather$'Heavy Rain')
#creating columns
lst = c()
for (i in levels(fullWeather$Weather)){
temp = unlist(strsplit(as.character(i), ","))
lst = c(lst, temp)
}
lst = lst[!(duplicated(lst))] #removing duplicates
lst
for (i in lst){
fullWeather[, i] = 0
}
#assigning values
for (i in 1:nrow(fullWeather)){
if (!is.na(fullWeather$Weather[i])){
temp = as.character(fullWeather$Weather[i])
temp = unlist(strsplit(temp, ","))
for (j in temp){
fullWeather[i, j] = 1
}
}
}
#collapsing to only: Rain, Snow, Thunderstorms, Fog, Freezing Rain
lst
head(fullWeather$'Heavy Rain')
head(fullWeather[fullWeather$'Heavy Rain' == 1, "Rain"])
head(fullWeather[fullWeather$'Heavy Rain' == 1, ])
#creating columns
lst = c()
for (i in levels(fullWeather$Weather)){
temp = unlist(strsplit(as.character(i), ","))
lst = c(lst, temp)
}
lst = lst[!(duplicated(lst))] #removing duplicates
lst
for (i in lst){
fullWeather[, i] = factor("0", levels = c("0", "1"))
}
names(fullWeather)
#assigning values
for (i in 1:nrow(fullWeather)){
if (!is.na(fullWeather$Weather[i])){
temp = as.character(fullWeather$Weather[i])
temp = unlist(strsplit(temp, ","))
for (j in temp){
fullWeather[i, j] = "1"
}
}
}
#collapsing to only: Rain, Snow, Thunderstorms, Fog, Freezing Rain
fullWeather$Rain[fullWeather$'Moderate Rain' == 1] = 1
fullWeather$Rain[fullWeather$'Heavy Rain' == 1] = 1
fullWeather$Snow[fullWeather$'Moderate Snow' == 1] = 1
fullWeather$Snow[fullWeather$'Heavy Snow' == 1] = 1
fullWeather$Snow[fullWeather$'Blowing Snow' == 1] = 1
fullWeather$Fog[fullWeather$'Freezing Fog' == 1] = 1
fullWeather$Fog[fullWeather$'Haze' == 1] = 1
fullWeather = subset(fullWeather, select = - c(`Moderate Rain`,
`Heavy Rain`, `Moderate Snow`, `Heavy Snow`,
`Blowing Snow`, `Freezing Fog`, `Haze`))
summary(fullWeather[,c("Weather", "Rain", "Fog", "Snow",
"Thunderstorms", "Freezing Rain")])
fullWeather[,c("Weather", "Rain", "Fog", "Snow", Thunderstorms", "Freezing Rain")]
fullWeather[,c("Weather", "Rain", "Fog", "Snow", Thunderstorms", "Freezing Rain")]
fullWeather[,c("Weather", "Rain", "Fog", "Snow", "Thunderstorms", "Freezing Rain")]
fullWeather[500:600 , c("Weather", "Rain", "Fog", "Snow", "Thunderstorms", "Freezing Rain")]
fullWeather[600:780 , c("Weather", "Rain", "Fog", "Snow", "Thunderstorms", "Freezing Rain")]
fullWeather[800:880 , c("Weather", "Rain", "Fog", "Snow", "Thunderstorms", "Freezing Rain")]
fullWeather[900:980 , c("Weather", "Rain", "Fog", "Snow", "Thunderstorms", "Freezing Rain")]
fullWeather[1000:1080 , c("Weather", "Rain", "Fog", "Snow", "Thunderstorms", "Freezing Rain")]
fullWeather[1100:1180 , c("Weather", "Rain", "Fog", "Snow", "Thunderstorms", "Freezing Rain")]
