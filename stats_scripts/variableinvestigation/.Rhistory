scale_y_continuous(labels = scales::label_number(suffix = "°")) +
theme(panel.grid.major.y = element_line(color = "#8ccde3",
size = 0.25,
linetype = 2))
alldata %>%
ggplot(aes(x=monthnumber, y=Temp...C.)) +
geom_boxplot(aes(x=Month.Of.Year), colour='#00008b', fill='#6495ed') +
geom_smooth(stat = 'summary', alpha = 0.2, fill = '#6495ed', color = '#00008b',
fun.data = median_hilow, fun.args = list(conf.int = 1)) +
#geom_line(stat='summary', fun='median', color='#00008b', lwd=1.2) +
xlab('') +
ylab('Temperature') +
scale_x_discrete(labels=month.abb) +
scale_y_continuous(labels = scales::label_number(suffix = "°C")) +
theme(panel.grid.major.y = element_line(color = "#8ccde3",
size = 0.25,
linetype = 2))
alldata %>%
ggplot(aes(x=monthnumber, y=Temp...C.)) +
geom_boxplot(aes(x=Month.Of.Year), colour='#00008b', fill='#6495ed') +
geom_smooth(stat = 'summary', alpha = 0.2, fill = '#6495ed', color = '#00008b',
fun.data = median_hilow, fun.args = list(conf.int = 1)) +
#geom_line(stat='summary', fun='median', color='#00008b', lwd=1.2) +
xlab('') +
ylab('Temperature') +
scale_x_discrete(labels=month.abb) +
scale_y_continuous(labels = scales::label_number(suffix = "°C")) #+
alldata %>%
ggplot(aes(x=monthnumber, y=Temp...C.)) +
geom_boxplot(aes(x=Month.Of.Year), colour='#00008b', fill='#6495ed') +
geom_smooth(stat = 'summary', alpha = 0.2, fill = '#6495ed', color = '#00008b',
fun.data = median_hilow, fun.args = list(conf.int = 1)) +
#geom_line(stat='summary', fun='median', color='#00008b', lwd=1.2) +
xlab('') +
ylab('Temperature') +
scale_x_discrete(labels=month.abb) +
scale_y_continuous(labels = scales::label_number(suffix = "°C")) +
theme(panel.grid.major.y = element_line(color = "#8ccde3",
size = 0.25,
linetype = 2))
alldata %>%
ggplot(aes(x=monthnumber, y=Wind.Dir..10s.deg)) +
geom_boxplot(aes(x=Month.Of.Year), colour='#00008b', fill='#6495ed') +
geom_smooth(stat = 'summary', alpha = 0.2, fill = '#6495ed', color = '#00008b',
fun.data = median_hilow, fun.args = list(conf.int = 1)) +
xlab('') +
ylab('Wind Direction') +
scale_x_discrete(labels=month.abb) +
scale_y_continuous(labels = scales::label_number(suffix = "°"))
names(weatherdarta)
names(weatherdata)
data.frame(
'Avg humidity' = mean(weatherdata$'Wind.Dir..10s.deg.', na.rm=TRUE),
'Avg crash humidity' = mean(alldata$'Wind.Dir..10s.deg.', na.rm = TRUE)
)
ggplot(data=weatherdata, aes(x=Wind.Dir..10s.deg.)) +
geom_density(colour='#1d2951', fill='#1d2951', alpha=0.9) +
geom_density(data=alldata, colour='#6495ed', fill='#6495ed', alpha=0.6) +
xlab('Wind Direction') +
ylab('Density') +
annotate(
geom="text", x=c(72, 30), y=c(0.0175, 0.0155), label=c("Year-round", "Crash temps"),
color=c("#1d2951", "#6495ed")
)
alldata %>%
ggplot(aes(x=monthnumber, y=Wind.Dir..10s.deg.)) +
geom_boxplot(aes(x=Month.Of.Year), colour='#00008b', fill='#6495ed') +
geom_smooth(stat = 'summary', alpha = 0.2, fill = '#6495ed', color = '#00008b',
fun.data = median_hilow, fun.args = list(conf.int = 1)) +
xlab('') +
ylab('Wind Direction') +
scale_x_discrete(labels=month.abb) +
scale_y_continuous(labels = scales::label_number(suffix = "°"))
alldata %>%
ggplot(aes(x=monthnumber, y=Wind.Dir..10s.deg.)) +
geom_boxplot(aes(x=Month.Of.Year), colour='#00008b', fill='#6495ed') +
geom_smooth(stat = 'summary', alpha = 0.2, fill = '#6495ed', color = '#00008b',
fun.data = median_hilow, fun.args = list(conf.int = 1)) +
xlab('') +
ylab('Wind Direction') +
scale_x_discrete(labels=month.abb) +
scale_y_continuous(labels = scales::label_number(suffix = "°"))
alldata %>%
ggplot(aes(x=monthnumber, y=Wind.Dir..10s.deg.)) +
geom_boxplot(aes(x=Month.Of.Year), colour='#00008b', fill='#6495ed') +
geom_smooth(stat = 'summary', alpha = 0.2, fill = '#6495ed', color = '#00008b',
fun.data = median_hilow, fun.args = list(conf.int = 1)) +
xlab('') +
ylab('Wind Direction') +
scale_x_discrete(labels=month.abb) +
scale_y_continuous(trans = function(x) 10*x,
labels = scales::label_number(suffix = "°"))
data.frame(
'Avg humidity' = mean(weatherdata$'Wind.Dir..10s.deg.', na.rm=TRUE),
'Avg crash humidity' = mean(alldata$'Wind.Dir..10s.deg.', na.rm = TRUE)
)
ggplot(data=weatherdata, aes(x=Wind.Dir..10s.deg.)) +
geom_density(colour='#1d2951', fill='#1d2951', alpha=0.9) +
geom_density(data=alldata, colour='#6495ed', fill='#6495ed', alpha=0.6) +
xlab('Wind Direction') +
ylab('Density') +
annotate(
geom="text", x=c(72, 30), y=c(0.0175, 0.0155), label=c("Year-round", "Crash temps"),
color=c("#1d2951", "#6495ed")
) +
scale_x_continuous(labels = scales::label_number(suffix = "0°"))
ggplot(data=weatherdata, aes(x=Wind.Dir..10s.deg.)) +
geom_density(colour='#1d2951', fill='#1d2951', alpha=0.9) +
geom_density(data=alldata, colour='#6495ed', fill='#6495ed', alpha=0.6) +
xlab('Wind Direction') +
ylab('Density') +
annotate(
geom="text", x=c(72, 30), y=c(0.0175, 0.0155), label=c("Year-round", "Crash temps"),
color=c("#1d2951", "#6495ed")
) +
scale_x_continuous(labels = scales::label_number(suffix = "0°", limits = c(0, 400)))
ggplot(data=weatherdata, aes(x=Wind.Dir..10s.deg.)) +
geom_density(colour='#1d2951', fill='#1d2951', alpha=0.9) +
geom_density(data=alldata, colour='#6495ed', fill='#6495ed', alpha=0.6) +
xlab('Wind Direction') +
ylab('Density') +
annotate(
geom="text", x=c(72, 30), y=c(0.0175, 0.0155), label=c("Year-round", "Crash temps"),
color=c("#1d2951", "#6495ed")
) +
scale_x_continuous(labels = scales::label_number(suffix = "0°"),  limits=c(0, 400))
ggplot(data=weatherdata, aes(x=Wind.Dir..10s.deg.)) +
geom_density(colour='#1d2951', fill='#1d2951', alpha=0.9) +
geom_density(data=alldata, colour='#6495ed', fill='#6495ed', alpha=0.6) +
xlab('Wind Direction') +
ylab('Density') +
annotate(
geom="text", x=c(72, 30), y=c(0.0175, 0.0155), label=c("Year-round", "Crash temps"),
color=c("#1d2951", "#6495ed")
) +
scale_x_continuous(labels = scales::label_number(suffix = "0°"),  limits=c(0, 40))
ggplot(data=weatherdata, aes(x=Wind.Dir..10s.deg.)) +
geom_density(colour='#1d2951', fill='#1d2951', alpha=0.9) +
geom_density(data=alldata, colour='#6495ed', fill='#6495ed', alpha=0.6) +
xlab('Wind Direction') +
ylab('Density') +
annotate(
geom="text", x=c(3, 22), y=c(0.04, 0.05), label=c("Year-round", "Crash direction"),
color=c("#1d2951", "#6495ed")
) +
scale_x_continuous(labels = scales::label_number(suffix = "0°"),  limits=c(0, 40))
ggplot(data=weatherdata, aes(x=Wind.Dir..10s.deg.)) +
geom_density(colour='#1d2951', fill='#1d2951', alpha=0.9) +
geom_density(data=alldata, colour='#6495ed', fill='#6495ed', alpha=0.6) +
xlab('Wind Direction') +
ylab('Density') +
annotate(
geom="text", x=c(3, 25), y=c(0.04, 0.05), label=c("Year-round", "Crash direction"),
color=c("#1d2951", "#6495ed")
) +
scale_x_continuous(labels = scales::label_number(suffix = "0°"),  limits=c(0, 40))
names(weatherdata)
data.frame(
'Avg visibility' = mean(weatherdata$'Visibility..km.', na.rm=TRUE),
'Avg crash visibility' = mean(alldata$'Visibility..km.', na.rm = TRUE)
)
ggplot(data=weatherdata, aes(x=Visibility..km.)) +
geom_density(colour='#1d2951', fill='#1d2951', alpha=0.9) +
geom_density(data=alldata, colour='#6495ed', fill='#6495ed', alpha=0.6) +
xlab('Visibility') +
ylab('Density') +
annotate(
geom="text", x=c(3, 25), y=c(0.04, 0.05), label=c("Year-round", "Crash direction"),
color=c("#1d2951", "#6495ed")
) +
scale_x_continuous(labels = scales::label_number(suffix = "km"),  limits=c(0, 40))
ggplot(data=weatherdata, aes(x=Visibility..km.)) +
geom_density(colour='#1d2951', fill='#1d2951', alpha=0.9) +
geom_density(data=alldata, colour='#6495ed', fill='#6495ed', alpha=0.6) +
xlab('Visibility') +
ylab('Density') +
annotate(
geom="text", x=c(3, 25), y=c(0.04, 0.05), label=c("Year-round", "Crash direction"),
color=c("#1d2951", "#6495ed")
) +
scale_x_continuous(labels = scales::label_number(suffix = "km"))
ggplot(data=weatherdata, aes(x=Visibility..km.)) +
geom_density(colour='#1d2951', fill='#1d2951', alpha=0.9) +
geom_density(data=alldata, colour='#6495ed', fill='#6495ed', alpha=0.6) +
xlab('Visibility') +
ylab('Density') +
# annotate(
#   geom="text", x=c(3, 25), y=c(0.04, 0.05), label=c("Year-round", "Crash direction"),
#   color=c("#1d2951", "#6495ed")
# ) +
scale_x_continuous(labels = scales::label_number(suffix = "km"))
ggplot(data=weatherdata, aes(x=Visibility..km.)) +
geom_density(colour='#1d2951', fill='#1d2951', alpha=0.9) +
geom_density(data=alldata, colour='#6495ed', fill='#6495ed', alpha=0.6) +
xlab('Visibility') +
ylab('Density') +
# annotate(
#   geom="text", x=c(3, 25), y=c(0.04, 0.05), label=c("Year-round", "Crash direction"),
#   color=c("#1d2951", "#6495ed")
# ) +
scale_x_continuous(labels = scales::label_number(suffix = "km")) +
scale_x_log10()
ggplot(data=weatherdata, aes(x=Visibility..km.)) +
geom_density(colour='#1d2951', fill='#1d2951', alpha=0.9) +
geom_density(data=alldata, colour='#6495ed', fill='#6495ed', alpha=0.6) +
xlab('Visibility') +
ylab('Density') +
# annotate(
#   geom="text", x=c(3, 25), y=c(0.04, 0.05), label=c("Year-round", "Crash direction"),
#   color=c("#1d2951", "#6495ed")
# ) +
scale_x_continuous(labels = scales::label_number(suffix = "km"))
ggplot(data=weatherdata, aes(x=Visibility..km.)) +
geom_density(colour='#1d2951', fill='#1d2951', alpha=0.9) +
geom_density(data=alldata, colour='#6495ed', fill='#6495ed', alpha=0.6) +
xlab('Visibility') +
ylab('Density') +
# annotate(
#   geom="text", x=c(3, 25), y=c(0.04, 0.05), label=c("Year-round", "Crash direction"),
#   color=c("#1d2951", "#6495ed")
# ) +
# scale_x_continuous(labels = scales::label_number(suffix = "km")) +
scale_x_log10()
ggplot(data=weatherdata, aes(x=Visibility..km.)) +
geom_density(colour='#1d2951', fill='#1d2951', alpha=0.9) +
geom_density(data=alldata, colour='#6495ed', fill='#6495ed', alpha=0.6) +
xlab('Visibility') +
ylab('Density') +
annotate(
geom="text", x=c(3, 25), y=c(0.04, 0.05), label=c("Year-round", "Crash direction"),
color=c("#1d2951", "#6495ed")
) +
scale_x_continuous(labels = scales::label_number(suffix = "km"), limits=c(14, 20))
ggplot(data=weatherdata, aes(x=Visibility..km.)) +
geom_density(colour='#1d2951', fill='#1d2951', alpha=0.9) +
geom_density(data=alldata, colour='#6495ed', fill='#6495ed', alpha=0.6) +
xlab('Visibility') +
ylab('Density') +
annotate(
geom="text", x=c(3, 25), y=c(0.04, 0.05), label=c("Year-round", "Crash direction"),
color=c("#1d2951", "#6495ed")
) +
scale_x_continuous(labels = scales::label_number(suffix = "km"), limits=c(16, 17))
ggplot(data=weatherdata, aes(x=Visibility..km.)) +
geom_density(colour='#1d2951', fill='#1d2951', alpha=0.9) +
geom_density(data=alldata, colour='#6495ed', fill='#6495ed', alpha=0.6) +
xlab('Visibility') +
ylab('Density') +
annotate(
geom="text", x=c(3, 25), y=c(0.04, 0.05), label=c("Year-round", "Crash direction"),
color=c("#1d2951", "#6495ed")
) +
scale_x_continuous(labels = scales::label_number(suffix = "km"), limits=c(15, 18))
ggplot(data=weatherdata, aes(x=Visibility..km.)) +
geom_density(colour='#1d2951', fill='#1d2951', alpha=0.9) +
geom_density(data=alldata, colour='#6495ed', fill='#6495ed', alpha=0.6) +
xlab('Visibility') +
ylab('Density') +
scale_x_continuous(labels = scales::label_number(suffix = "km"))
alldata %>%
ggplot(aes(x=monthnumber, y=Visibility..km.)) +
geom_boxplot(aes(x=Month.Of.Year), colour='#00008b', fill='#6495ed') +
geom_smooth(stat = 'summary', alpha = 0.2, fill = '#6495ed', color = '#00008b',
fun.data = median_hilow, fun.args = list(conf.int = 1)) +
xlab('') +
ylab('Visibility') +
scale_x_discrete(labels=month.abb) +
scale_y_continuous(labels = scales::label_number(suffix = "km"))
data.frame(
'Avg visibility' = mean(weatherdata$'Visibility..km.', na.rm=TRUE),
'Avg crash visibility' = mean(alldata$'Visibility..km.', na.rm = TRUE)
)
names(alldata)
weatherdata %>%
ggplot(aes(y=Precip..Amount..mm., x=Month)) +
geom_area(stat = 'summary', fun = mean, lty = 0,
fill = '#00008b', alpha=0.5) +
geom_area(data=alldata, aes(x=monthnumber), stat = 'summary',
fun = mean, lty = 0, fill='#6495ed', alpha=0.6) +
annotate(
geom="text", x=c(8.63, 2), y=c(0.040, 0.043), label=c("Year-round", "Crash precip."),
color=c("#00008b", "#6495ed")
) +
ylab('Precipitation') +
scale_y_continuous(labels = scales::label_number(suffix = "mm")) +
scale_x_discrete(labels=month.abb)
?scale_x_discrete
weatherdata %>%
ggplot(aes(y=Precip..Amount..mm., x=Month)) +
geom_area(stat = 'summary', fun = mean, lty = 0,
fill = '#00008b', alpha=0.5) +
geom_area(data=alldata, aes(x=monthnumber), stat = 'summary',
fun = mean, lty = 0, fill='#6495ed', alpha=0.6) +
annotate(
geom="text", x=c(8.63, 2), y=c(0.040, 0.043), label=c("Year-round", "Crash precip."),
color=c("#00008b", "#6495ed")
) +
ylab('Precipitation') +
scale_y_continuous(labels = scales::label_number(suffix = "mm")) +
scale_x_discrete(breaks = 1:12, labels=month.abb)
weatherdata %>%
ggplot(aes(y=Precip..Amount..mm., x=Month)) +
geom_area(stat = 'summary', fun = mean, lty = 0,
fill = '#00008b', alpha=0.5) +
geom_area(data=alldata, aes(x=monthnumber), stat = 'summary',
fun = mean, lty = 0, fill='#6495ed', alpha=0.6) +
annotate(
geom="text", x=c(8.63, 2), y=c(0.040, 0.043), label=c("Year-round", "Crash precip."),
color=c("#00008b", "#6495ed")
) +
ylab('Precipitation') +
scale_y_continuous(labels = scales::label_number(suffix = "mm")) +
scale_x_continuous(breaks = 1:12, labels=month.abb)
library(ggplot2)
library(ggthemes)
theme_set(theme_few())
library(tidyverse)
load_first_object <- function(fname){
#this function was written by Dr. Rhonda Rosychuk at the U of A
e <- new.env(parent = parent.frame())
load(fname, e)
return(e[[ls(e)[1]]])
}
#cleaned and combined
alldata = load_first_object("../../rda_files/all_data.rda")
#reading as.factor
factors = c("Fog", "Freezing.Rain", "Snow", "Rain", "Thunderstorms")
for (i in factors){
alldata[,i] = as.factor(alldata[,i])
}
#weatherdata
weatherdata = c()
for (i in c(2017:2021)){
for (j in c(1:12)){
temp = subset(read.csv(paste0('../../weatherdata/en_climate_hourly_BC_1123939_',
sprintf("%02d", j), '-', i, '_P1H.csv')),
select = - c(`Temp.Flag`,
`Dew.Point.Temp.Flag`, `Rel.Hum.Flag`,
`Precip..Amount.Flag`, `Wind.Dir.Flag`,
`Wind.Spd.Flag`, `Visibility.Flag`,
`Stn.Press.Flag`, `Hmdx`, `Hmdx.Flag`, `Wind.Chill.Flag`))
weatherdata = rbind(weatherdata, temp)
}
}
class(alldata$Time.Category)
table(alldata$Time.Category)
alldata %>%
ggplot(aes(x=Time.Category)) +
geom_histogram(stat='count', colour='#00008b', fill='#6495ed') +
xlab('') +
ylab('Count')
alldata %>%
ggplot(aes(x=Time.Category)) +
geom_histogram(stat='count', colour='#00008b', fill='#6495ed') +
xlab('') +
ylab('Count') +
theme(axis.text.x = element_text(angle = 90))
alldata %>%
ggplot(aes(x=Time.Category)) +
geom_histogram(stat='count', colour='#00008b', fill='#6495ed') +
xlab('') +
ylab('Count') +
theme(axis.text.x = element_text(angle = 30))
alldata %>%
ggplot(aes(x=Time.Category)) +
geom_histogram(stat='count', colour='#00008b', fill='#6495ed') +
xlab('') +
ylab('Count') +
theme(axis.text.x = element_text(angle = 30, vjust = 0.5, hjust=1))
alldata %>%
ggplot(aes(x=Time.Category)) +
geom_histogram(stat='count', colour='#00008b', fill='#6495ed') +
xlab('') +
ylab('Count') +
theme(axis.text.x = element_text(angle = 30, vjust = 0.1, hjust=1))
alldata %>%
ggplot(aes(x=Time.Category)) +
geom_histogram(stat='count', colour='#00008b', fill='#6495ed') +
xlab('') +
ylab('Count') +
theme(axis.text.x = element_text(angle = 30, vjust = 1.1, hjust=1))
alldata %>%
ggplot(aes(x=Time.Category)) +
geom_histogram(stat='count', colour='#00008b', fill='#6495ed') +
xlab('') +
ylab('Count') +
theme(axis.text.x = element_text(angle = 20, vjust = 1 hjust=1))
alldata %>%
ggplot(aes(x=Time.Category)) +
geom_histogram(stat='count', colour='#00008b', fill='#6495ed') +
xlab('') +
ylab('Count') +
theme(axis.text.x = element_text(angle = 20, vjust = 1 hjust=1))
alldata %>%
ggplot(aes(x=Time.Category)) +
geom_histogram(stat='count', colour='#00008b', fill='#6495ed') +
xlab('') +
ylab('Count') +
theme(axis.text.x = element_text(angle = 20, vjust = 1, hjust=1))
head(alldata$Intersection.Crash)
length(alldata$Intersection.Crash)
table(alldata$Intersection.Crash)
sum(alldata$Intersection.Crash)
table(alldata$Intersection.Crash)['Yes']
unname(table(alldata$Intersection.Crash)['Yes'])
cat('Number of intersection crashes:', unname(table(alldata$Intersection.Crash)['Yes']))
cat('Number of intersection crashes:', unname(table(alldata$Intersection.Crash)['Yes']), "(", unname(table(alldata$Intersection.Crash)['Yes'])*100/nrow(alldata), "%)")
cat('Number of intersection crashes:', unname(table(alldata$Intersection.Crash)['Yes']), "(", round(unname(table(alldata$Intersection.Crash)['Yes'])*100/nrow(alldata)), "%)")
cat('Number of intersection crashes:', unname(table(alldata$Intersection.Crash)['Yes']), "(", round(unname(table(alldata$Intersection.Crash)['Yes'])*100/nrow(alldata), 1), "%)")
cat('Number of crashes: ', nrow(alldata), sep='')
cat('Number of intersection crashes: ', unname(table(alldata$Intersection.Crash)['Yes']), " (", round(unname(table(alldata$Intersection.Crash)['Yes'])*100/nrow(alldata), 1), "%)", sep='')
table(alldata$Crash.Severity)
cat('Number of casualty crashes: ', unname(table(alldata$Intersection.Crash)['CASUALTY CRASH']), " (", round(unname(table(alldata$Intersection.Crash)['CASUALTY CRASH'])*100/nrow(alldata), 1), "%)", sep='')
cat('Number of casualty crashes: ', unname(table(alldata$Crash.Severity)['CASUALTY CRASH']), " (", round(unname(table(alldata$Crash.Severity)['CASUALTY CRASH'])*100/nrow(alldata), 1), "%)", sep='')
order(table(alldata$Street.Full.Name), decreasing = TRUE)[1:3]
order(table(alldata$Street.Full.Name), decreasing = TRUE)
table(alldata$Street.Full.Name)
table(alldata$Street.Full.Name)[order(table(alldata$Street.Full.Name))]
table(alldata$Street.Full.Name)[order(table(alldata$Street.Full.Name))][1:5]
table(alldata$Street.Full.Name)[order(table(alldata$Street.Full.Name), decreasing = TRUE)][1:5]
cat('Top 5 most common streets:', table(alldata$Street.Full.Name)[order(table(alldata$Street.Full.Name), decreasing = TRUE)][1:5])
cat('Top 5 most common streets:', names(table(alldata$Street.Full.Name)[order(table(alldata$Street.Full.Name), decreasing = TRUE)][1:5]))
cat('Top 5 most common streets:')
table(alldata$Street.Full.Name)[order(table(alldata$Street.Full.Name), decreasing = TRUE)][1:5]
head(alldata$Total.Victims)
sum(alldata$Total.Victims)
table(alldata$Date.Of.Loss.Year)
cat('Avg. victims per year: ', sum(alldata$Total.Victims)/5, sep='')
cat('Avg. victims per year: ', round(sum(alldata$Total.Victims)/5), sep='')
table(alldata$Stn.Press..kPa.)
summary(alldata$Stn.Press..kPa.)
data.frame(
'Avg wind dir.' = mean(weatherdata$Stn.Press..kPa., na.rm=TRUE),
'Avg crash wind dir.' = mean(alldata$Stn.Press..kPa., na.rm = TRUE)
)
ggplot(data=weatherdata, aes(x=Stn.Press..kPa.)) +
geom_density(colour='#1d2951', fill='#1d2951', alpha=0.9) +
geom_density(data=alldata, colour='#6495ed', fill='#6495ed', alpha=0.6) +
xlab('Air Pressure (kPa)') +
ylab('Density') +
# annotate(
#   geom="text", x=c(3, 25), y=c(0.04, 0.05), label=c("Year-round", "Crash wind\n direction"),
#   color=c("#1d2951", "#6495ed")
# ) +
scale_x_continuous(labels = scales::label_number(suffix = "0°"),  limits=c(0, 40))
ggplot(data=weatherdata, aes(x=Stn.Press..kPa.)) +
geom_density(colour='#1d2951', fill='#1d2951', alpha=0.9) +
geom_density(data=alldata, colour='#6495ed', fill='#6495ed', alpha=0.6) +
xlab('Air Pressure (kPa)') +
ylab('Density') +
ggplot(data=weatherdata, aes(x=Stn.Press..kPa.)) +
geom_density(colour='#1d2951', fill='#1d2951', alpha=0.9) +
geom_density(data=alldata, colour='#6495ed', fill='#6495ed', alpha=0.6) +
xlab('Air Pressure (kPa)') +
ylab('Density')
ggplot(data=weatherdata, aes(x=Stn.Press..kPa.)) +
geom_density(colour='#1d2951', fill='#1d2951', alpha=0.9) +
geom_density(data=alldata, colour='#6495ed', fill='#6495ed', alpha=0.6) +
xlab('Air Pressure') +
ylab('Density') +
annotate(
geom="text", x=c(3, 97), y=c(0.04, 0.6), label=c("Year-round", "Crash wind\n direction"),
color=c("#1d2951", "#6495ed")
) +
scale_x_continuous(labels = scales::label_number(suffix = "kPa"))
ggplot(data=weatherdata, aes(x=Stn.Press..kPa.)) +
geom_density(colour='#1d2951', fill='#1d2951', alpha=0.9) +
geom_density(data=alldata, colour='#6495ed', fill='#6495ed', alpha=0.6) +
xlab('Air Pressure') +
ylab('Density') +
annotate(
geom="text", x=c(97.5, 97), y=c(0.04, 0.6), label=c("Year-round", "Crash wind\n direction"),
color=c("#1d2951", "#6495ed")
) +
scale_x_continuous(labels = scales::label_number(suffix = "kPa"))
ggplot(data=weatherdata, aes(x=Stn.Press..kPa.)) +
geom_density(colour='#1d2951', fill='#1d2951', alpha=0.9) +
geom_density(data=alldata, colour='#6495ed', fill='#6495ed', alpha=0.6) +
xlab('Air Pressure') +
ylab('Density') +
annotate(
geom="text", x=c(98, 97.5), y=c(0.2, 0.6), label=c("Year-round", "Crashes"),
color=c("#1d2951", "#6495ed")
) +
scale_x_continuous(labels = scales::label_number(suffix = "kPa"))
ggplot(data=weatherdata, aes(x=Stn.Press..kPa.)) +
geom_density(colour='#1d2951', fill='#1d2951', alpha=0.9) +
geom_density(data=alldata, colour='#6495ed', fill='#6495ed', alpha=0.6) +
xlab('Air Pressure') +
ylab('Density') +
annotate(
geom="text", x=c(98, 97.3), y=c(0.25, 0.6), label=c("Year-round", "Crashes"),
color=c("#1d2951", "#6495ed")
) +
scale_x_continuous(labels = scales::label_number(suffix = " kPa"))
table(alldata$Month.Of.Year)
table(alldata$Month.Of.Year, 2)
table(alldata$Month.Of.Year, rep(2, 12))
table(alldata$Cyclist.Flag)
test = alldata[alldata$Cyclist.Flag == 'Yes',]
nrow(test)
table(test$Month.Of.Year)
table(test$Month.Of.Year)/nrow(test)
round(table(test$Month.Of.Year)/nrow(test), 1)
round(table(test$Month.Of.Year)/nrow(test), 3)*100
paste0(round(table(test$Month.Of.Year)/nrow(test), 3)*100, '%')
round(table(test$Month.Of.Year)/nrow(test), 3)*100
table(alldata$Animal.Flag)
table(alldata$Heavy.Veh.Flag)
table(alldata$Motorcycle.Flag)
table(alldata$Parked.Vehicle.Flag)
table(alldata$Pedestrian.Flag)
